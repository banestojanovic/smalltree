import{r as p,j as e,q as _,W as F}from"./app-Q253YIMy.js";import{P as H,e as J,f as G,g as U,h as Q,i as Y,j as Z,k as M,l as y,m as V,n as q,C as I,a as N,D as ee,b as se,c as re,d as ae,S as le}from"./slider-B1Ut_Bhe.js";import{B as k}from"./badge-CR4fxmf5.js";import{B as P,c as h,a as te}from"./button-Ci-DNgYG.js";import{S as E}from"./separator-Cj1yBFfQ.js";import{c as L}from"./createLucideIcon-1jbUaAdr.js";import{X as ne}from"./x-x-OzxC4E.js";import{C as O}from"./chevron-down-Bfv81iDv.js";import{u as ce}from"./useTranslation-CuHCN7gN.js";import"./index-DSlY0Ued.js";import"./index-CvGgvrxJ.js";import"./dialog-Bzs-Vw8H.js";import"./index-BMg-f5Fi.js";import"./index-CpX38UW8.js";import"./chevron-right-Cx2gLfzE.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=L("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=L("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),T=te("m-1 transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-300",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-foreground/10 bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"inverted"}},defaultVariants:{variant:"default"}}),$=p.forwardRef(({options:o,onValueChange:i,variant:d,defaultValue:f=[],placeholder:x="Select options",animation:g=0,maxCount:l=3,modalPopover:u=!1,asChild:D=!1,className:b,...w},j)=>{const[t,m]=p.useState(f),[s,n]=p.useState(!1),[a,A]=p.useState(!1),z=r=>{if(r.key==="Enter")n(!0);else if(r.key==="Backspace"&&!r.currentTarget.value){const c=[...t];c.pop(),m(c),i(c)}},R=r=>{const c=t.includes(r)?t.filter(v=>v!==r):[...t,r];m(c),i(c)},C=()=>{m([]),i([])},K=()=>{n(r=>!r)},W=()=>{const r=t.slice(0,l);m(r),i(r)},X=()=>{if(t.length===o.length)C();else{const r=o.map(c=>c.value);m(r),i(r)}};return e.jsxs(H,{open:s,onOpenChange:n,modal:u,children:[e.jsx(J,{asChild:!0,children:e.jsx(P,{ref:j,...w,onClick:K,className:h("flex h-auto min-h-9 w-full items-center justify-between rounded-md border bg-inherit p-1 hover:bg-inherit [&_svg]:pointer-events-auto",b),children:t.length>0?e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap items-center",children:[t.slice(0,l).map(r=>{const c=o.find(S=>S.value===r),v=c==null?void 0:c.icon;return e.jsxs(k,{className:h(a?"animate-bounce":"",T({variant:d})),style:{animationDuration:`${g}s`},children:[v&&e.jsx(v,{className:"mr-2 h-4 w-4"}),c==null?void 0:c.label,e.jsx(B,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:S=>{S.stopPropagation(),R(r)}})]},r)}),t.length>l&&e.jsxs(k,{className:h("border-foreground/1 bg-transparent text-foreground hover:bg-transparent",a?"animate-bounce":"",T({variant:d})),style:{animationDuration:`${g}s`},children:[`+ ${t.length-l} more`,e.jsx(B,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:r=>{r.stopPropagation(),W()}})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ne,{className:"mx-2 h-4 cursor-pointer text-muted-foreground",onClick:r=>{r.stopPropagation(),C()}}),e.jsx(E,{orientation:"vertical",className:"flex h-full min-h-6"}),e.jsx(O,{className:"mx-2 h-4 cursor-pointer text-muted-foreground"})]})]}):e.jsxs("div",{className:"mx-auto flex w-full items-center justify-between",children:[e.jsx("span",{className:"mx-3 text-sm text-muted-foreground",children:x}),e.jsx(O,{className:"mx-2 h-4 cursor-pointer text-muted-foreground"})]})})}),e.jsx(G,{className:"w-auto p-0",align:"start",onEscapeKeyDown:()=>n(!1),children:e.jsxs(U,{children:[e.jsx(Q,{placeholder:"Search...",onKeyDown:z}),e.jsxs(Y,{children:[e.jsx(Z,{children:"No results found."}),e.jsxs(M,{children:[e.jsxs(y,{onSelect:X,className:"cursor-pointer",children:[e.jsx("div",{className:h("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",t.length===o.length?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx("span",{children:"(Select All)"})]},"all"),o.map(r=>{const c=t.includes(r.value);return e.jsxs(y,{onSelect:()=>R(r.value),className:"cursor-pointer",children:[e.jsx("div",{className:h("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",c?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(V,{className:"h-4 w-4"})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})]}),e.jsx(q,{}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(y,{onSelect:C,className:"flex-1 cursor-pointer justify-center",children:"Clear"}),e.jsx(E,{orientation:"vertical",className:"flex h-full min-h-6"})]}),e.jsx(y,{onSelect:()=>n(!1),className:"max-w-full flex-1 cursor-pointer justify-center",children:"Close"})]})})]})]})}),g>0&&t.length>0&&e.jsx(oe,{className:h("my-2 h-3 w-3 cursor-pointer bg-background text-foreground",a?"":"text-muted-foreground"),onClick:()=>A(!a)})]})});$.displayName="MultiSelect";const Ce=({attributes:o,variations:i,query:d})=>{var t,m;const{t:f}=ce(),x=(t=_().props.global)==null?void 0:t.categories,g=(x==null?void 0:x.map(s=>({value:s.id.toString(),label:s.name})))??[],{data:l,setData:u,get:D}=F({attributes:o.reduce((s,n)=>{var a;return s[n.slug]=((a=d.attributes)==null?void 0:a[n.slug])??null,s},{}),variations:i.reduce((s,n)=>{var a;return s[n.id]=((a=d.variations)==null?void 0:a[n.id])??null,s},{}),priceRange:d.priceRange??null,search:d.search??null,selectedCategories:d.selectedCategories??[]}),b=s=>{u("priceRange",s)},w=()=>{D(route("products.search-page"),{preserveScroll:!0,preserveState:!0})},j=p.useRef(l);return p.useEffect(()=>{JSON.stringify(j.current)!==JSON.stringify(l)&&(w(),j.current=l)},[l]),e.jsx("section",{className:"mt-10",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-7",children:[e.jsx("div",{children:e.jsx($,{options:g,onValueChange:s=>u("selectedCategories",s??[]),defaultValue:l==null?void 0:l.selectedCategories,placeholder:"Select Categories",variant:"inverted",animation:2,maxCount:3,className:"bg-white shadow-sm"})}),i.length>0&&i.map(s=>{var n;return e.jsx("div",{children:e.jsxs(I,{value:l.variations[s.id],onChange:a=>u("variations",{...l.variations,[s.id]:a}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(N,{value:null,children:f("category_show.filters.not_selected")}),(n=s==null?void 0:s.values)==null?void 0:n.map(a=>e.jsx(N,{value:a.id.toString(),children:a.value},a.id))]})},s.id)}),o.length>0&&o.map(s=>{var n;return e.jsx("div",{className:"",children:e.jsxs(I,{value:l.attributes[s.slug],onChange:a=>u("attributes",{...l.attributes,[s.slug]:a}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(N,{value:null,children:f("category_show.filters.not_selected")}),(n=s==null?void 0:s.values)==null?void 0:n.map(a=>e.jsx(N,{value:a.id.toString(),children:a.value},a.id))]})},s.id)}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(P,{variant:"outline",children:["Price",e.jsx(re,{className:"opacity-50"})]})}),e.jsx(ae,{className:"w-80",children:e.jsxs("div",{className:"p-3",children:[e.jsx("h2",{className:"py-2 text-lg font-semibold",children:"Price Range"}),e.jsx(P,{onClick:()=>u("priceRange",[]),children:"Clear"}),e.jsx("div",{className:"flex items-center justify-center",children:l.priceRange&&((m=l.priceRange)==null?void 0:m.length)&&e.jsxs(k,{variant:"outline",className:"text-lg",children:["$",l.priceRange[0]??0," - $",l.priceRange[1]??0]})}),e.jsx(le,{className:"mt-4",defaultValue:d.priceRange??[0,1e4],onValueCommit:b,max:1e4,min:0,minStepsBetweenThumbs:10,step:100,"aria-label":"Price range"})]})})]})]})})})};export{Ce as default};
