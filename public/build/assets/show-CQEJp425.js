import{r as d,j as e,V as R,a as W,M as J}from"./app-fESoKJh-.js";import{a as S,u as X,B as N}from"./button-C14P26Id.js";import{C as Y,a as Q}from"./card-CpshHW28.js";import{F as j}from"./FieldGroup-DwnMhfWb.js";import{I as _}from"./UpdateCartQuantity-4QI_VwDI.js";import{L as Z,F as ee}from"./FrontendLayout-9lOn1myW.js";import{c as k,u as ae}from"./index-CJPl-51W.js";import{c as I,P as C}from"./functions-Txs-iH3y.js";import{c as E,u as re,R as se,I as te}from"./index-CjsjXSiz.js";import{u as oe,a as ce,C as ie}from"./index-CAb25w0_.js";import{P as ne}from"./index-3ndfp1MA.js";import{c as G}from"./utils-CytzSlOG.js";import{T as b}from"./typography-CKXqZIcx.js";import le from"./ProductsList-oojY4YfF.js";import"./createLucideIcon-B2pSCOZ_.js";import"./dialog-BbZKi-1a.js";import"./InputError-DWLvczEE.js";import"./PromotionsFull-CCVIWg_3.js";import"./PromotionCardItem-Ch6mgvUg.js";import"./ProductPrice-ir7dHSRP.js";import"./proxy-zaz_jFZE.js";import"./TopPosts-CkBXhjS5.js";import"./badge-ClX4GRkH.js";import"./NavLink-DG61N3FM.js";import"./ApplicationLogo-B0s_1Dvp.js";var w="Radio",[de,D]=I(w),[ue,me]=de(w),A=d.forwardRef((a,l)=>{const{__scopeRadio:s,name:t,checked:i=!1,required:n,disabled:u,value:h="on",onCheck:p,form:f,...m}=a,[c,x]=d.useState(null),o=S(l,r=>x(r)),v=d.useRef(!1),y=c?f||!!c.closest("form"):!0;return e.jsxs(ue,{scope:s,checked:i,disabled:u,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":i,"data-state":T(i),"data-disabled":u?"":void 0,disabled:u,value:h,...m,ref:o,onClick:k(a.onClick,r=>{i||p==null||p(),y&&(v.current=r.isPropagationStopped(),v.current||r.stopPropagation())})}),y&&e.jsx(pe,{control:c,bubbles:!v.current,name:t,value:h,checked:i,required:n,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});A.displayName=w;var F="RadioIndicator",q=d.forwardRef((a,l)=>{const{__scopeRadio:s,forceMount:t,...i}=a,n=me(F,s);return e.jsx(ne,{present:t||n.checked,children:e.jsx(C.span,{"data-state":T(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:l})})});q.displayName=F;var pe=a=>{const{control:l,checked:s,bubbles:t=!0,...i}=a,n=d.useRef(null),u=oe(s),h=ce(l);return d.useEffect(()=>{const p=n.current,f=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==s&&c){const x=new Event("click",{bubbles:t});c.call(p,s),p.dispatchEvent(x)}},[u,s,t]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:n,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function T(a){return a?"checked":"unchecked"}var he=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],P="RadioGroup",[fe,Ue]=I(P,[E,D]),L=E(),O=D(),[xe,ve]=fe(P),M=d.forwardRef((a,l)=>{const{__scopeRadioGroup:s,name:t,defaultValue:i,value:n,required:u=!1,disabled:h=!1,orientation:p,dir:f,loop:m=!0,onValueChange:c,...x}=a,o=L(s),v=re(f),[y,r]=ae({prop:n,defaultProp:i,onChange:c});return e.jsx(xe,{scope:s,name:t,required:u,disabled:h,value:y,onValueChange:r,children:e.jsx(se,{asChild:!0,...o,orientation:p,dir:v,loop:m,children:e.jsx(C.div,{role:"radiogroup","aria-required":u,"aria-orientation":p,"data-disabled":h?"":void 0,dir:v,...x,ref:l})})})});M.displayName=P;var V="RadioGroupItem",K=d.forwardRef((a,l)=>{const{__scopeRadioGroup:s,disabled:t,...i}=a,n=ve(V,s),u=n.disabled||t,h=L(s),p=O(s),f=d.useRef(null),m=S(l,f),c=n.value===i.value,x=d.useRef(!1);return d.useEffect(()=>{const o=y=>{he.includes(y.key)&&(x.current=!0)},v=()=>x.current=!1;return document.addEventListener("keydown",o),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",v)}},[]),e.jsx(te,{asChild:!0,...h,focusable:!u,active:c,children:e.jsx(A,{disabled:u,required:n.required,checked:c,...p,...i,name:n.name,ref:m,onCheck:()=>n.onValueChange(i.value),onKeyDown:k(o=>{o.key==="Enter"&&o.preventDefault()}),onFocus:k(i.onFocus,()=>{var o;x.current&&((o=f.current)==null||o.click())})})})});K.displayName=V;var ye="RadioGroupIndicator",z=d.forwardRef((a,l)=>{const{__scopeRadioGroup:s,...t}=a,i=O(s);return e.jsx(q,{...i,...t,ref:l})});z.displayName=ye;var B=M,$=K,je=z;const U=d.forwardRef(({className:a,...l},s)=>e.jsx(B,{className:G("grid gap-2",a),...l,ref:s}));U.displayName=B.displayName;const H=d.forwardRef(({className:a,...l},s)=>e.jsx($,{ref:s,className:G("flex aspect-square size-5 items-center justify-center rounded-full border border-primary text-primary shadow-sm focus:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:e.jsx(je,{className:"flex items-center justify-center",children:e.jsx(ie,{className:"size-3.5 fill-primary"})})}));H.displayName=$.displayName;const _e=()=>{const{t:a}=X(),l=R().props.cart,s=R().props.global,t=R().props.payment,[i,n]=d.useState(!1),[u,h]=d.useState(null),p=d.useRef(null),f=[{id:"1",title:a("checkout.payment_methods.credit_card")},{id:"2",title:a("checkout.payment_methods.upon_delivery")}],{data:m,setData:c,post:x,errors:o}=W({email:"",phone:"",first_name:"",last_name:"",address:"",city:"",postal_code:"",payment_method:""}),v=r=>{r.preventDefault(),n(!0),x(route("orders.store"),{preserveScroll:"errors",onSuccess:()=>{n(!1),t!=null&&t.pay_with_card&&(t!=null&&t.paymentData)&&(h(t==null?void 0:t.paymentData),setTimeout(()=>{var g;(g=p.current)==null||g.submit()},250))}})},y=()=>{c({email:"test@example.com",phone:"+1234567890",first_name:"John",last_name:"Doe",address:"123 Test Street",city:"Test City",postal_code:"12345",payment_method:"1"})};return e.jsxs(e.Fragment,{children:[e.jsx(J,{title:a("checkout.checkout")}),e.jsx("div",{className:"relative container lg:max-w-6xl",children:e.jsxs("div",{className:"py-7 lg:pt-20",children:[e.jsx("h2",{className:"sr-only",children:a("checkout.checkout")}),(s==null?void 0:s.env)==="local"&&e.jsx(N,{variant:"outlined-white",type:"button",onClick:y,className:"absolute top-4",children:a("checkout.fill_with_test_data")}),u&&e.jsx("form",{ref:p,action:"https://testsecurepay.eway2pay.com/fim/est3Dgate",method:"POST",className:"hidden",children:Object.entries(u).map(([r,g])=>e.jsx("input",{type:"text",name:r,value:g??"",readOnly:!0},r))}),e.jsxs("form",{onSubmit:v,className:"grid gap-10 md:gap-20 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(b,{as:"h4",children:a("checkout.contact_info")}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-1",children:[e.jsx(j,{label:a("checkout.form.labels.email"),name:"email",error:o.email,required:!0,children:e.jsx(_,{id:"email",type:"email",placeholder:a("checkout.form.placeholders.email"),value:m.email,onChange:r=>c("email",r.target.value)})}),e.jsx(j,{label:a("checkout.form.labels.phone"),name:"phone",error:o.phone,required:!0,children:e.jsx(_,{id:"phone",placeholder:a("checkout.form.placeholders.phone"),value:m.phone,onChange:r=>c("phone",r.target.value)})})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(b,{as:"h4",children:a("checkout.shipping_info")}),e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{className:"grid gap-6 md:flex md:items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.first_name"),name:"first_name",error:o.first_name,required:!0,children:e.jsx(_,{id:"first_name",placeholder:a("checkout.form.placeholders.first_name"),value:m.first_name,onChange:r=>c("first_name",r.target.value)})})}),e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.last_name"),name:"last_name",error:o.last_name,required:!0,children:e.jsx(_,{id:"last_name",placeholder:a("checkout.form.placeholders.last_name"),value:m.last_name,onChange:r=>c("last_name",r.target.value)})})})]}),e.jsx(j,{label:a("checkout.form.labels.address"),name:"address",error:o.address,required:!0,children:e.jsx(_,{id:"address",placeholder:a("checkout.form.placeholders.address"),value:m.address,onChange:r=>c("address",r.target.value)})}),e.jsxs("div",{className:"grid gap-7 md:flex md:items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(j,{label:"City",name:"city",error:o.city,required:!0,children:e.jsx(_,{id:"city",placeholder:"City",value:m.city,onChange:r=>c("city",r.target.value)})})}),e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.postal_code"),name:"postal_code",error:o.postal_code,required:!0,children:e.jsx(_,{id:"postal_code",placeholder:a("checkout.form.placeholders.postal_code"),value:m.postal_code,onChange:r=>c("postal_code",r.target.value)})})})]})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(b,{as:"h4",children:a("checkout.payment_method")}),e.jsx(U,{onValueChange:r=>c("payment_method",r),value:m.payment_method,className:"flex w-full flex-col items-center md:flex-row md:gap-7",children:f.map((r,g)=>e.jsx(N,{asChild:!0,variant:"outlined-white",className:"h-12 w-full justify-start px-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{value:r.id,id:`payment_method_${r.id}`}),e.jsx(Z,{htmlFor:`payment_method_${r.id}`,className:"absolute inset-0 cursor-pointer opacity-0",children:e.jsx("span",{className:"sr-only",children:r.title})}),e.jsx("span",{children:r.title})]})},g))}),o.payment_method&&e.jsx("div",{className:"mt-2 text-sm text-red-500",children:o.payment_method})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(b,{as:"h4",children:a("checkout.order_summary")}),e.jsx(Y,{className:"rounded-md border-none shadow-none",children:e.jsxs(Q,{className:"p-2 md:p-10",children:[e.jsx(le,{cart:l}),e.jsx("div",{className:"mt-10",children:e.jsx(N,{type:"submit",className:"block h-12 w-full uppercase",disabled:i,children:a("checkout.actions.confirm")})})]})})]})]})]})})]})};_e.layout=a=>e.jsx(ee,{children:a});export{_e as default};
