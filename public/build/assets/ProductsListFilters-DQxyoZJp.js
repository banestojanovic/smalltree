import{r as p,j as e,q as _,W as F}from"./app-U85ioafX.js";import{P as H,d as J,e as U,f as G,g as Q,h as Y,i as Z,j as V,k as y,l as I,m as q,C as E,a as N,D as ee,b as se,c as re,S as ae}from"./slider-Dd6NKGY3.js";import{B as k}from"./badge-BPiNmFKz.js";import{B as P,c as h,b as te,u as le}from"./button-BYO3rakx.js";import{S as O}from"./separator-B42RGP8S.js";import{c as D}from"./createLucideIcon-DNjx1hu5.js";import{X as ne}from"./x-CXpyogKu.js";import{C as B}from"./chevron-down-CLcQVB4y.js";import"./index-CFYe36uK.js";import"./index-DpliQ1Cn.js";import"./index-h3qVkuC4.js";import"./dialog-oQoFX0zu.js";import"./index-DLl-OdIR.js";import"./index-BH0id4z6.js";import"./chevron-right-CNkQcO4z.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=D("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=D("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=D("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),L=te("m-1 transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-300",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-foreground/10 bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"inverted"}},defaultVariants:{variant:"default"}}),$=p.forwardRef(({options:o,onValueChange:i,variant:d,defaultValue:f=[],placeholder:x="Select options",animation:g=0,maxCount:t=3,modalPopover:u=!1,asChild:R=!1,className:b,...w},j)=>{const[l,m]=p.useState(f),[s,n]=p.useState(!1),[a,A]=p.useState(!1),z=r=>{if(r.key==="Enter")n(!0);else if(r.key==="Backspace"&&!r.currentTarget.value){const c=[...l];c.pop(),m(c),i(c)}},M=r=>{const c=l.includes(r)?l.filter(v=>v!==r):[...l,r];m(c),i(c)},C=()=>{m([]),i([])},K=()=>{n(r=>!r)},W=()=>{const r=l.slice(0,t);m(r),i(r)},X=()=>{if(l.length===o.length)C();else{const r=o.map(c=>c.value);m(r),i(r)}};return e.jsxs(H,{open:s,onOpenChange:n,modal:u,children:[e.jsx(J,{asChild:!0,children:e.jsx(P,{ref:j,...w,onClick:K,className:h("flex h-auto min-h-9 w-full items-center justify-between rounded-md border bg-inherit p-1 hover:bg-inherit [&_svg]:pointer-events-auto",b),children:l.length>0?e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap items-center",children:[l.slice(0,t).map(r=>{const c=o.find(S=>S.value===r),v=c==null?void 0:c.icon;return e.jsxs(k,{className:h(a?"animate-bounce":"",L({variant:d})),style:{animationDuration:`${g}s`},children:[v&&e.jsx(v,{className:"mr-2 h-4 w-4"}),c==null?void 0:c.label,e.jsx(T,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:S=>{S.stopPropagation(),M(r)}})]},r)}),l.length>t&&e.jsxs(k,{className:h("border-foreground/1 bg-transparent text-foreground hover:bg-transparent",a?"animate-bounce":"",L({variant:d})),style:{animationDuration:`${g}s`},children:[`+ ${l.length-t} more`,e.jsx(T,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:r=>{r.stopPropagation(),W()}})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ne,{className:"mx-2 h-4 cursor-pointer text-muted-foreground",onClick:r=>{r.stopPropagation(),C()}}),e.jsx(O,{orientation:"vertical",className:"flex h-full min-h-6"}),e.jsx(B,{className:"mx-2 h-4 cursor-pointer text-muted-foreground"})]})]}):e.jsxs("div",{className:"mx-auto flex w-full items-center justify-between",children:[e.jsx("span",{className:"mx-3 text-sm text-muted-foreground",children:x}),e.jsx(B,{className:"mx-2 h-4 cursor-pointer text-muted-foreground"})]})})}),e.jsx(U,{className:"w-auto p-0",align:"start",onEscapeKeyDown:()=>n(!1),children:e.jsxs(G,{children:[e.jsx(Q,{placeholder:"Search...",onKeyDown:z}),e.jsxs(Y,{children:[e.jsx(Z,{children:"No results found."}),e.jsxs(V,{children:[e.jsxs(y,{onSelect:X,className:"cursor-pointer",children:[e.jsx("div",{className:h("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",l.length===o.length?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("span",{children:"(Select All)"})]},"all"),o.map(r=>{const c=l.includes(r.value);return e.jsxs(y,{onSelect:()=>M(r.value),className:"cursor-pointer",children:[e.jsx("div",{className:h("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",c?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(I,{className:"h-4 w-4"})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})]}),e.jsx(q,{}),e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(y,{onSelect:C,className:"flex-1 cursor-pointer justify-center",children:"Clear"}),e.jsx(O,{orientation:"vertical",className:"flex h-full min-h-6"})]}),e.jsx(y,{onSelect:()=>n(!1),className:"max-w-full flex-1 cursor-pointer justify-center",children:"Close"})]})})]})]})}),g>0&&l.length>0&&e.jsx(oe,{className:h("my-2 h-3 w-3 cursor-pointer bg-background text-foreground",a?"":"text-muted-foreground"),onClick:()=>A(!a)})]})});$.displayName="MultiSelect";const Ce=({attributes:o,variations:i,query:d})=>{var l,m;const{t:f}=le(),x=(l=_().props.global)==null?void 0:l.categories,g=(x==null?void 0:x.map(s=>({value:s.id.toString(),label:s.name})))??[],{data:t,setData:u,get:R}=F({attributes:o.reduce((s,n)=>{var a;return s[n.slug]=((a=d.attributes)==null?void 0:a[n.slug])??null,s},{}),variations:i.reduce((s,n)=>{var a;return s[n.id]=((a=d.variations)==null?void 0:a[n.id])??null,s},{}),priceRange:d.priceRange??null,search:d.search??null,selectedCategories:d.selectedCategories??[]}),b=s=>{u("priceRange",s)},w=()=>{R(route("products.search-page"),{preserveScroll:!0,preserveState:!0})},j=p.useRef(t);return p.useEffect(()=>{JSON.stringify(j.current)!==JSON.stringify(t)&&(w(),j.current=t)},[t]),e.jsx("section",{className:"mt-10",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-7",children:[e.jsx("div",{children:e.jsx($,{options:g,onValueChange:s=>u("selectedCategories",s??[]),defaultValue:t==null?void 0:t.selectedCategories,placeholder:"Select Categories",variant:"inverted",animation:2,maxCount:3,className:"bg-white shadow-sm"})}),i.length>0&&i.map(s=>{var n;return e.jsx("div",{children:e.jsxs(E,{value:t.variations[s.id],onChange:a=>u("variations",{...t.variations,[s.id]:a}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(N,{value:null,children:f("category_show.filters.not_selected")}),(n=s==null?void 0:s.values)==null?void 0:n.map(a=>e.jsx(N,{value:a.id.toString(),children:a.value},a.id))]})},s.id)}),o.length>0&&o.map(s=>{var n;return e.jsx("div",{className:"",children:e.jsxs(E,{value:t.attributes[s.slug],onChange:a=>u("attributes",{...t.attributes,[s.slug]:a}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(N,{value:null,children:f("category_show.filters.not_selected")}),(n=s==null?void 0:s.values)==null?void 0:n.map(a=>e.jsx(N,{value:a.id.toString(),children:a.value},a.id))]})},s.id)}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(P,{variant:"outline",children:["Price",e.jsx(ce,{className:"opacity-50"})]})}),e.jsx(re,{className:"w-80",children:e.jsxs("div",{className:"p-3",children:[e.jsx("h2",{className:"py-2 text-lg font-semibold",children:"Price Range"}),e.jsx(P,{onClick:()=>u("priceRange",[]),children:"Clear"}),e.jsx("div",{className:"flex items-center justify-center",children:t.priceRange&&((m=t.priceRange)==null?void 0:m.length)&&e.jsxs(k,{variant:"outline",className:"text-lg",children:["$",t.priceRange[0]??0," - $",t.priceRange[1]??0]})}),e.jsx(ae,{className:"mt-4",defaultValue:d.priceRange??[0,1e4],onValueCommit:b,max:1e4,min:0,minStepsBetweenThumbs:10,step:100,"aria-label":"Price range"})]})})]})]})})})};export{Ce as default};
