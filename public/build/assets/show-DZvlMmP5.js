import{r as d,j as e,V as G,a as Q,M as Z}from"./app-B70fL2J6.js";import{a as D,u as ee,B as b}from"./button-ZPocGnJW.js";import{C as ae,a as re}from"./card-HwZL9snn.js";import{F as j}from"./FieldGroup-pdyzc5yj.js";import{I as _}from"./UpdateCartQuantity-BxhJfDis.js";import{L as te,F as se}from"./FrontendLayout-CY_BSdni.js";import{c as R,u as oe}from"./index-CWig0cpE.js";import{c as A,P as N}from"./functions-XR0qWJV3.js";import{c as F,u as ce,R as ie,I as ne}from"./index-D-TxneWy.js";import{u as le,a as de,C as ue}from"./index-Dz8cLkmJ.js";import{P as me}from"./index-DaXJCOA1.js";import{c as q}from"./utils-CytzSlOG.js";import{T as g}from"./typography-DHaIdJBi.js";import pe from"./ProductsList-B9noe_gw.js";import"./createLucideIcon-CxC-uYb6.js";import"./dialog-BA21bpjl.js";import"./InputError-Yb_Mpqbz.js";import"./PromotionsFull-C5vg5Azq.js";import"./PromotionCardItem-Cr54pIyd.js";import"./ProductPrice-BT8mRfIA.js";import"./proxy-DF6r5vo8.js";import"./TopPosts-B8rlbsdv.js";import"./badge-jep7HOfl.js";import"./NavLink-BW_i8hll.js";import"./ApplicationLogo-BEssawso.js";var k="Radio",[he,T]=A(k),[fe,xe]=he(k),L=d.forwardRef((a,l)=>{const{__scopeRadio:t,name:p,checked:s=!1,required:o,disabled:m,value:v="on",onCheck:f,form:i,...u}=a,[x,c]=d.useState(null),h=D(l,n=>c(n)),y=d.useRef(!1),r=x?i||!!x.closest("form"):!0;return e.jsxs(fe,{scope:t,checked:s,disabled:m,children:[e.jsx(N.button,{type:"button",role:"radio","aria-checked":s,"data-state":V(s),"data-disabled":m?"":void 0,disabled:m,value:v,...u,ref:h,onClick:R(a.onClick,n=>{s||f==null||f(),r&&(y.current=n.isPropagationStopped(),y.current||n.stopPropagation())})}),r&&e.jsx(ve,{control:x,bubbles:!y.current,name:p,value:v,checked:s,required:o,disabled:m,form:i,style:{transform:"translateX(-100%)"}})]})});L.displayName=k;var O="RadioIndicator",M=d.forwardRef((a,l)=>{const{__scopeRadio:t,forceMount:p,...s}=a,o=xe(O,t);return e.jsx(me,{present:p||o.checked,children:e.jsx(N.span,{"data-state":V(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:l})})});M.displayName=O;var ve=a=>{const{control:l,checked:t,bubbles:p=!0,...s}=a,o=d.useRef(null),m=le(t),v=de(l);return d.useEffect(()=>{const f=o.current,i=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(i,"checked").set;if(m!==t&&x){const c=new Event("click",{bubbles:p});x.call(f,t),f.dispatchEvent(c)}},[m,t,p]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:o,style:{...a.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function V(a){return a?"checked":"unchecked"}var ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],C="RadioGroup",[je,Xe]=A(C,[F,T]),K=F(),z=T(),[_e,ge]=je(C),B=d.forwardRef((a,l)=>{const{__scopeRadioGroup:t,name:p,defaultValue:s,value:o,required:m=!1,disabled:v=!1,orientation:f,dir:i,loop:u=!0,onValueChange:x,...c}=a,h=K(t),y=ce(i),[r,n]=oe({prop:o,defaultProp:s,onChange:x});return e.jsx(_e,{scope:t,name:p,required:m,disabled:v,value:r,onValueChange:n,children:e.jsx(ie,{asChild:!0,...h,orientation:f,dir:y,loop:u,children:e.jsx(N.div,{role:"radiogroup","aria-required":m,"aria-orientation":f,"data-disabled":v?"":void 0,dir:y,...c,ref:l})})})});B.displayName=C;var $="RadioGroupItem",U=d.forwardRef((a,l)=>{const{__scopeRadioGroup:t,disabled:p,...s}=a,o=ge($,t),m=o.disabled||p,v=K(t),f=z(t),i=d.useRef(null),u=D(l,i),x=o.value===s.value,c=d.useRef(!1);return d.useEffect(()=>{const h=r=>{ye.includes(r.key)&&(c.current=!0)},y=()=>c.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",y)}},[]),e.jsx(ne,{asChild:!0,...v,focusable:!m,active:x,children:e.jsx(L,{disabled:m,required:o.required,checked:x,...f,...s,name:o.name,ref:u,onCheck:()=>o.onValueChange(s.value),onKeyDown:R(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:R(s.onFocus,()=>{var h;c.current&&((h=i.current)==null||h.click())})})})});U.displayName=$;var be="RadioGroupIndicator",H=d.forwardRef((a,l)=>{const{__scopeRadioGroup:t,...p}=a,s=z(t);return e.jsx(M,{...s,...p,ref:l})});H.displayName=be;var W=B,J=U,Re=H;const X=d.forwardRef(({className:a,...l},t)=>e.jsx(W,{className:q("grid gap-2",a),...l,ref:t}));X.displayName=W.displayName;const Y=d.forwardRef(({className:a,...l},t)=>e.jsx(J,{ref:t,className:q("flex aspect-square size-5 items-center justify-center rounded-full border border-primary text-primary shadow-sm focus:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:e.jsx(Re,{className:"flex items-center justify-center",children:e.jsx(ue,{className:"size-3.5 fill-primary"})})}));Y.displayName=J.displayName;const Ne=()=>{const{t:a}=ee(),l=G().props.cart,t=G().props.global,[p,s]=d.useState(!1),[o,m]=d.useState(null),v=d.useRef(null),f=[{id:"1",title:a("checkout.payment_methods.credit_card")},{id:"2",title:a("checkout.payment_methods.upon_delivery")}],{data:i,setData:u,post:x,errors:c}=Q({email:"",phone:"",first_name:"",last_name:"",address:"",city:"",postal_code:"",payment_method:""}),h=r=>{r.preventDefault(),s(!0),x(route("orders.store"),{preserveScroll:"errors",onSuccess:n=>{var w,P,S,I;s(!1),(P=(w=n==null?void 0:n.props)==null?void 0:w.payment)!=null&&P.pay_with_card&&((I=(S=n==null?void 0:n.props)==null?void 0:S.payment)!=null&&I.paymentData)&&(m(n.props.payment.paymentData),setTimeout(()=>{var E;(E=v.current)==null||E.submit()}))}})},y=()=>{u({email:"test@example.com",phone:"+1234567890",first_name:"John",last_name:"Doe",address:"123 Test Street",city:"Test City",postal_code:"12345",payment_method:"1"})};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:a("checkout.checkout")}),e.jsx("div",{className:"relative container lg:max-w-6xl",children:e.jsxs("div",{className:"py-7 lg:pt-20",children:[e.jsx("h2",{className:"sr-only",children:a("checkout.checkout")}),(t==null?void 0:t.env)==="local"&&e.jsx(b,{variant:"outlined-white",type:"button",onClick:y,className:"absolute top-4",children:a("checkout.fill_with_test_data")}),o&&e.jsx("form",{ref:v,action:"https://testsecurepay.eway2pay.com/fim/est3Dgate",method:"POST",className:"hidden",children:Object.entries(o).map(([r,n])=>e.jsx("input",{type:"text",name:r,value:n??"",readOnly:!0},r))}),e.jsxs("form",{onSubmit:h,className:"grid gap-10 md:gap-20 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(g,{as:"h4",children:a("checkout.contact_info")}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-1",children:[e.jsx(j,{label:a("checkout.form.labels.email"),name:"email",error:c.email,required:!0,children:e.jsx(_,{id:"email",type:"email",placeholder:a("checkout.form.placeholders.email"),value:i.email,onChange:r=>u("email",r.target.value)})}),e.jsx(j,{label:a("checkout.form.labels.phone"),name:"phone",error:c.phone,required:!0,children:e.jsx(_,{id:"phone",placeholder:a("checkout.form.placeholders.phone"),value:i.phone,onChange:r=>u("phone",r.target.value)})})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(g,{as:"h4",children:a("checkout.shipping_info")}),e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{className:"grid gap-6 md:flex md:items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.first_name"),name:"first_name",error:c.first_name,required:!0,children:e.jsx(_,{id:"first_name",placeholder:a("checkout.form.placeholders.first_name"),value:i.first_name,onChange:r=>u("first_name",r.target.value)})})}),e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.last_name"),name:"last_name",error:c.last_name,required:!0,children:e.jsx(_,{id:"last_name",placeholder:a("checkout.form.placeholders.last_name"),value:i.last_name,onChange:r=>u("last_name",r.target.value)})})})]}),e.jsx(j,{label:a("checkout.form.labels.address"),name:"address",error:c.address,required:!0,children:e.jsx(_,{id:"address",placeholder:a("checkout.form.placeholders.address"),value:i.address,onChange:r=>u("address",r.target.value)})}),e.jsxs("div",{className:"grid gap-7 md:flex md:items-center",children:[e.jsx("div",{className:"w-full",children:e.jsx(j,{label:"City",name:"city",error:c.city,required:!0,children:e.jsx(_,{id:"city",placeholder:"City",value:i.city,onChange:r=>u("city",r.target.value)})})}),e.jsx("div",{className:"w-full",children:e.jsx(j,{label:a("checkout.form.labels.postal_code"),name:"postal_code",error:c.postal_code,required:!0,children:e.jsx(_,{id:"postal_code",placeholder:a("checkout.form.placeholders.postal_code"),value:i.postal_code,onChange:r=>u("postal_code",r.target.value)})})})]})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(g,{as:"h4",children:a("checkout.payment_method")}),e.jsx(X,{onValueChange:r=>u("payment_method",r),value:i.payment_method,className:"flex w-full flex-col items-center md:flex-row md:gap-7",children:f.map((r,n)=>e.jsx(b,{asChild:!0,variant:"outlined-white",className:"h-12 w-full justify-start px-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{value:r.id,id:`payment_method_${r.id}`}),e.jsx(te,{htmlFor:`payment_method_${r.id}`,className:"absolute inset-0 cursor-pointer opacity-0",children:e.jsx("span",{className:"sr-only",children:r.title})}),e.jsx("span",{children:r.title})]})},n))}),c.payment_method&&e.jsx("div",{className:"mt-2 text-sm text-red-500",children:c.payment_method})]})]}),e.jsxs("div",{className:"space-y-3.5 md:space-y-7",children:[e.jsx(g,{as:"h4",children:a("checkout.order_summary")}),e.jsx(ae,{className:"rounded-md border-none shadow-none",children:e.jsxs(re,{className:"p-2 md:p-10",children:[e.jsx(pe,{cart:l}),e.jsx("div",{className:"mt-10",children:e.jsx(b,{type:"submit",className:"block h-12 w-full uppercase",disabled:p,children:a("checkout.actions.confirm")})})]})})]})]})]})})]})};Ne.layout=a=>e.jsx(se,{children:a});export{Ne as default};
