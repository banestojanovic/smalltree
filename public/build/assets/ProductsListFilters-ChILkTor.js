import{r as g,j as e,a as k}from"./app-ChooiqfW.js";import{u as M,B as x}from"./button-CkPMROMo.js";import{P as D,a as F,b as O,C as V,c as E,d as T,e as I,f as $,g as Z,h as b,D as S,i as y,j as R,S as L}from"./slider-BQu4g1Iy.js";import{c as P}from"./utils-CytzSlOG.js";import{B}from"./badge-BRuArHPH.js";import{S as J,a as _,b as z,c as G,d as H,e as A}from"./sheet-DTkr6Fti.js";import{c as K}from"./createLucideIcon-BK3__p92.js";import"./index-Dgg6mCVr.js";import"./index-1DCfKPpA.js";import"./index-CMGEL_yX.js";import"./dialog-BxBsMkEm.js";import"./index-DDXrElnz.js";import"./index-ziZ1zZ1-.js";import"./chevron-right-C75nCNcI.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function w({value:p,onChange:c,placeholder:o="Select an option...",inputPlaceholder:h="Search...",className:m,children:C}){var j,f;const[u,n]=g.useState(!1),{t:i}=M(),t=(j=g.Children.map(C,r=>g.isValidElement(r)&&r.type===d?{value:r.props.value,label:r.props.children,element:r}:null))==null?void 0:j.filter(Boolean);return e.jsxs(D,{open:u,onOpenChange:n,children:[e.jsx(F,{asChild:!0,children:e.jsxs(x,{variant:"outlined-white",role:"combobox","aria-expanded":u,className:P("h-12 justify-between",m),children:[p?(f=t==null?void 0:t.find(r=>r.value===p))==null?void 0:f.label:o,e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})]})}),e.jsx(O,{className:"p-0",children:e.jsxs(V,{children:[e.jsx(E,{placeholder:h}),e.jsxs(T,{children:[e.jsx(I,{children:i("filters.messages.no_results_found")}),e.jsx($,{children:t==null?void 0:t.map(r=>e.jsxs(Z,{onSelect:()=>{c(r.value),n(!1)},children:[r.label,p===r.value&&e.jsx(b,{className:P("ml-auto opacity-100")})]},r.value))})]})]})})]})}function d({value:p,children:c}){return e.jsx(e.Fragment,{children:c})}const te=({category:p,attributes:c,variations:o,query:h})=>{var N,v;const{t:m}=M(),[C,u]=g.useState(!1),{data:n,setData:i,get:t}=k({attributes:c.reduce((s,a)=>{var l;return s[a.slug]=((l=h.attributes)==null?void 0:l[a.slug])??null,s},{}),variations:o.reduce((s,a)=>{var l;return s[a.id]=((l=h.variations)==null?void 0:l[a.id])??null,s},{}),priceRange:h.priceRange??null}),j=s=>{i("priceRange",s),u(!1)},f=()=>{t(route("categories.show",p.slug),{preserveScroll:!0,preserveState:!0})},r=g.useRef(n);return g.useEffect(()=>{JSON.stringify(r.current)!==JSON.stringify(n)&&(f(),r.current=n)},[n]),e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"mt-10 hidden md:block",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-7",children:[o.length>0&&o.map(s=>{var a;return e.jsx("div",{className:"",children:e.jsxs(w,{value:n.variations[s.id],onChange:l=>i("variations",{...n.variations,[s.id]:l}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(d,{value:null,children:m("category_show.filters.not_selected")}),(a=s==null?void 0:s.values)==null?void 0:a.map(l=>e.jsx(d,{value:l.id.toString(),children:l.value},l.id))]})},s.id)}),c.length>0&&c.map(s=>{var a;return e.jsx("div",{className:"",children:e.jsxs(w,{value:n.attributes[s.slug],onChange:l=>i("attributes",{...n.attributes,[s.slug]:l}),placeholder:s.name,inputPlaceholder:s.name,className:"",children:[e.jsx(d,{value:null,children:m("category_show.filters.not_selected")}),(a=s==null?void 0:s.values)==null?void 0:a.map(l=>e.jsx(d,{value:l.id.toString(),children:l.value},l.id))]})},s.id)}),e.jsxs(S,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(x,{variant:"outlined-white",className:"w-[200px] !justify-between py-5",children:["Price",e.jsx("span",{className:"opacity-50",children:e.jsx("svg",{width:"5",height:"4",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.85 5.55L0 0.700001L0.7 0L4.85 4.15L9 0L9.7 0.700001L4.85 5.55Z",fill:"black"})})})]})}),e.jsx(R,{className:"w-80",children:e.jsxs("div",{className:"p-3",children:[e.jsx("h2",{className:"py-2 text-lg font-semibold",children:"Price Range"}),e.jsx(x,{onClick:()=>i("priceRange",[]),children:"Clear"}),e.jsx("div",{className:"flex items-center justify-center",children:n.priceRange&&((N=n.priceRange)==null?void 0:N.length)&&e.jsxs(B,{variant:"outline",className:"text-lg",children:["$",n.priceRange[0]??0," - $",n.priceRange[1]??0]})}),e.jsx(L,{className:"mt-4",defaultValue:h.priceRange??[0,1e4],onValueCommit:j,max:1e4,min:0,step:10,"aria-label":"Price range"})]})})]})]})})}),e.jsx("section",{className:"container flex items-center justify-end md:hidden",children:e.jsxs(J,{open:C,onOpenChange:u,children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{size:"circle",variant:"outline",children:e.jsx(Q,{})})}),e.jsxs(z,{children:[e.jsx(G,{children:e.jsx(H,{children:m("Filter products")})}),e.jsx(A,{className:"sr-only",children:"Filter products"}),e.jsxs("div",{className:"mt-7 flex w-full flex-col gap-7 px-4",children:[o.length>0&&o.map(s=>{var a;return e.jsx("div",{className:"",children:e.jsxs(w,{value:n.variations[s.id],onChange:l=>i("variations",{...n.variations,[s.id]:l}),placeholder:s.name,inputPlaceholder:s.name,className:"w-full",children:[e.jsx(d,{value:null,children:m("category_show.filters.not_selected")}),(a=s==null?void 0:s.values)==null?void 0:a.map(l=>e.jsx(d,{value:l.id.toString(),children:l.value},l.id))]})},s.id*Math.random())}),c.length>0&&c.map(s=>{var a;return e.jsx("div",{className:"",children:e.jsxs(w,{value:n.attributes[s.slug],onChange:l=>i("attributes",{...n.attributes,[s.slug]:l}),placeholder:s.name,inputPlaceholder:s.name,className:"w-full",children:[e.jsx(d,{value:null,children:m("category_show.filters.not_selected")}),(a=s==null?void 0:s.values)==null?void 0:a.map(l=>e.jsx(d,{value:l.id.toString(),children:l.value},l.id))]})},s.id*Math.random())}),e.jsxs(S,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(x,{variant:"outlined-white",className:"!justify-between py-5",children:["Price",e.jsx("span",{className:"opacity-50",children:e.jsx("svg",{width:"5",height:"4",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M4.85 5.55L0 0.700001L0.7 0L4.85 4.15L9 0L9.7 0.700001L4.85 5.55Z",fill:"black"})})})]})}),e.jsx(R,{className:"w-80",children:e.jsxs("div",{className:"p-3",children:[e.jsx("h2",{className:"py-2 text-lg font-semibold",children:"Price Range"}),e.jsx(x,{onClick:()=>i("priceRange",[]),children:"Clear"}),e.jsx("div",{className:"flex items-center justify-center",children:n.priceRange&&((v=n.priceRange)==null?void 0:v.length)&&e.jsxs(B,{variant:"outline",className:"text-lg",children:["$",n.priceRange[0]??0," - $",n.priceRange[1]??0]})}),e.jsx(L,{className:"mt-4",defaultValue:h.priceRange??[0,1e4],onValueCommit:j,max:1e4,min:0,step:10,"aria-label":"Price range"})]})})]})]})]})]})})]})};export{te as default};
