import{r as C,a as V,j as s,U as o}from"./app-DIv9xq5M.js";import{A as y}from"./AddToCartButton-CaGgBMI9.js";import{P as N}from"./ProductPrice-B3JPBvzQ.js";import{B as w}from"./button-EEU2vWXN.js";import{D as T,a as k,b as P,c as z,d as M,e as E}from"./dialog-BT-V55lR.js";import{T as h}from"./typography-B8cMddG3.js";import{T as Z,a as B}from"./toggle-group-aceolfCb.js";import{u as d}from"./index-C2ksEuVx.js";import{C as D,b as S,e as O,c as $,d as A}from"./card-v5PWkdKT.js";import{m as G}from"./proxy-CEncB1qu.js";function I({product:e}){var f,g,c;const{t:r}=d(),[m,t]=C.useState(!1),[n,j]=C.useState(null);C.useEffect(()=>{var i,l;if(e!=null&&e.grouped_variations){const x=Object.keys(e.grouped_variations)[0];x&&((i=e.grouped_variations[x])!=null&&i[1])&&j((l=e.grouped_variations[x][1])==null?void 0:l.id.toString())}},[e]);const a=(f=e==null?void 0:e.variations)==null?void 0:f.find(i=>{var l;return(l=i==null?void 0:i.variations)==null?void 0:l.some(x=>{var v;return((v=x==null?void 0:x.pivot)==null?void 0:v.variation_value_id)==n})}),{post:b,transform:_}=V({product_id:e==null?void 0:e.id,price:0,real_price:0,variation_id:null,quantity:1}),H=()=>{_(i=>{var l;return{...i,price:((l=a==null?void 0:a.discount)==null?void 0:l.price)??(a==null?void 0:a.price)??(e==null?void 0:e.discount)??(e==null?void 0:e.price)??0,real_price:(a==null?void 0:a.price)??(e==null?void 0:e.price)??0,variation_id:n}}),b(route("buy_now"))};return s.jsxs(T,{open:m,onOpenChange:t,children:[s.jsx(k,{asChild:!0,children:s.jsx(w,{size:"circle",variant:"secondary",children:s.jsx("span",{children:s.jsx("svg",{className:"size-4",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M2.07771 23.1429C1.48543 23.1429 0.991285 22.9449 0.595285 22.5489C0.199285 22.1529 0.000857143 21.6587 0 21.0664V7.21929C0 6.62786 0.198428 6.13414 0.595285 5.73814C0.992143 5.34214 1.48629 5.14371 2.07771 5.14286H4.5V4.5C4.5 3.25029 4.93757 2.18786 5.81271 1.31271C6.68786 0.437571 7.75029 0 9 0C10.2497 0 11.3121 0.437571 12.1873 1.31271C13.0624 2.18786 13.5 3.25029 13.5 4.5V5.14286H15.9236C16.515 5.14286 17.0087 5.34129 17.4047 5.73814C17.8007 6.135 17.9991 6.62914 18 7.22057V21.0664C18 21.6579 17.8016 22.152 17.4047 22.5489C17.0079 22.9457 16.5141 23.1437 15.9236 23.1429H2.07771ZM2.07771 21.8571H15.9236C16.1207 21.8571 16.302 21.7749 16.4674 21.6103C16.6329 21.4457 16.7151 21.264 16.7143 21.0651V7.22057C16.7143 7.02257 16.632 6.84086 16.4674 6.67543C16.3029 6.51 16.1211 6.42771 15.9223 6.42857H13.5V9.64286C13.5 9.82629 13.4387 9.97929 13.3161 10.1019C13.1936 10.2244 13.0406 10.2857 12.8571 10.2857C12.6737 10.2857 12.5207 10.2244 12.3981 10.1019C12.2756 9.97929 12.2143 9.82629 12.2143 9.64286V6.42857H5.78571V9.64286C5.78571 9.82629 5.72443 9.97929 5.60186 10.1019C5.47929 10.2244 5.32629 10.2857 5.14286 10.2857C4.95943 10.2857 4.80643 10.2244 4.68386 10.1019C4.56129 9.97929 4.5 9.82629 4.5 9.64286V6.42857H2.07771C1.87971 6.42857 1.698 6.51086 1.53257 6.67543C1.36714 6.84 1.28486 7.02171 1.28571 7.22057V21.0664C1.28571 21.2636 1.368 21.4449 1.53257 21.6103C1.69714 21.7757 1.87843 21.858 2.07643 21.8571M5.78571 5.14286H12.2143V4.5C12.2143 3.59486 11.9049 2.83286 11.286 2.214C10.6671 1.59514 9.90514 1.28571 9 1.28571C8.09486 1.28571 7.33286 1.59514 6.714 2.214C6.09514 2.83286 5.78571 3.59486 5.78571 4.5V5.14286Z",fill:"#5E5E5E"})})})})}),s.jsxs(P,{className:"max-h-[80vh] overflow-y-auto sm:max-w-[500px]",children:[s.jsxs(z,{children:[s.jsx(M,{className:"sr-only",children:r("sr.product_variations")}),s.jsx(E,{className:"sr-only",children:r("sr.product_variations")})]}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("section",{className:"flex w-5/6 items-center gap-3",children:[((g=e.cover)==null?void 0:g.original_url)&&s.jsx("figure",{className:"flex size-16 shrink-0 items-center justify-center rounded-full border bg-white",children:s.jsx("img",{className:"size-12 rounded-full object-cover",src:e.cover.original_url,alt:""})}),s.jsxs(h,{as:"h3",children:[" ",e.name]})]}),s.jsx("section",{children:s.jsx(h,{as:"p",className:"text-[15px]/7",children:e.description})}),s.jsxs("section",{className:"space-y-2",children:[s.jsx(N,{price:(a==null?void 0:a.price)??e.price??0,discountPrice:((c=a==null?void 0:a.discount)==null?void 0:c.price)??null}),s.jsx("div",{children:s.jsx(Z,{type:"single",variant:"outline",className:"justify-start",value:n??void 0,onValueChange:i=>j(i),children:Object.keys((e==null?void 0:e.grouped_variations)??{}).map(i=>s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs(h,{as:"p",className:"text-xs/7",children:[" ",i," "]}),s.jsx("div",{className:"flex gap-2",children:e==null?void 0:e.grouped_variations[i].map(l=>s.jsx(B,{variant:"default",value:l.id.toString(),"aria-label":"Toggle bold",children:l.value},l.id))})]},i))})}),s.jsxs("div",{className:"xs:grid-cols-2 grid gap-2 pt-4",children:[s.jsx(y,{disabled:!n,productVariantId:n,product:e,showPrice:!1,size:"lg",variant:"outlined",className:"inline-flex items-center justify-center uppercase sm:text-base",iconClass:"size-5! shrink-0 fill-foreground",label:r("product.add_to_cart"),handleAddedToCart:()=>t(!1)}),s.jsx(w,{size:"lg",className:"flex w-full sm:text-base",onClick:()=>H(),children:s.jsxs("span",{className:"flex items-center gap-x-1",children:[s.jsx("span",{children:s.jsxs("svg",{className:"size-6! shrink-0",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M19.4345 4.065H4.56445C3.90141 4.065 3.26553 4.32839 2.79669 4.79724C2.32785 5.26608 2.06445 5.90196 2.06445 6.565V17.435C2.06445 18.098 2.32785 18.7339 2.79669 19.2028C3.26553 19.6716 3.90141 19.935 4.56445 19.935H19.4345C20.0975 19.935 20.7334 19.6716 21.2022 19.2028C21.6711 18.7339 21.9345 18.098 21.9345 17.435V6.565C21.9345 5.90196 21.6711 5.26608 21.2022 4.79724C20.7334 4.32839 20.0975 4.065 19.4345 4.065ZM20.9345 13.995H14.5145C13.984 13.995 13.4753 13.7843 13.1002 13.4092C12.7252 13.0341 12.5145 12.5254 12.5145 11.995C12.5145 11.4646 12.7252 10.9559 13.1002 10.5808C13.4753 10.2057 13.984 9.995 14.5145 9.995H20.9345V13.995ZM14.5145 8.995C13.7188 8.995 12.9557 9.31107 12.3931 9.87368C11.8305 10.4363 11.5145 11.1994 11.5145 11.995C11.5145 12.7907 11.8305 13.5537 12.3931 14.1163C12.9557 14.6789 13.7188 14.995 14.5145 14.995H20.9345V17.435C20.9345 17.8328 20.7764 18.2144 20.4951 18.4957C20.2138 18.777 19.8323 18.935 19.4345 18.935H4.56445C4.16663 18.935 3.7851 18.777 3.50379 18.4957C3.22249 18.2144 3.06445 17.8328 3.06445 17.435V6.565C3.06445 6.16718 3.22249 5.78565 3.50379 5.50434C3.7851 5.22304 4.16663 5.065 4.56445 5.065H19.4345C19.8323 5.065 20.2138 5.22304 20.4951 5.50434C20.7764 5.78565 20.9345 6.16718 20.9345 6.565V8.995H14.5145Z",fill:"white"}),s.jsx("path",{d:"M14.5195 12.996C15.0718 12.996 15.5195 12.5483 15.5195 11.996C15.5195 11.4437 15.0718 10.996 14.5195 10.996C13.9672 10.996 13.5195 11.4437 13.5195 11.996C13.5195 12.5483 13.9672 12.996 14.5195 12.996Z",fill:"white"})]})}),s.jsx("span",{className:"uppercase",children:r("checkout.buy_now")})]})})]})]})]})]})]})}const Y=({product:e})=>{var m,t,n;const{t:r}=d();return s.jsxs(D,{className:"relative flex w-full flex-col justify-between border-none shadow-none transition hover:scale-[1.01] hover:shadow-sm",children:[e.discount&&s.jsxs("span",{className:"bg-primary absolute top-2 right-2 rounded-md px-4 py-1.5 text-xs text-white",children:[r("order.on_action")," ",(m=e==null?void 0:e.discount)!=null&&m.percentage?`${e.discount.percentage}%`:""]}),(e==null?void 0:e.tag)&&s.jsx("span",{className:`bg-ternary absolute top-2 rounded-md px-4 py-1.5 text-xs text-white ${e!=null&&e.discount?"left-2":"right-2"}`,children:e.tag.name}),(e==null?void 0:e.stock_status)===0&&s.jsx("span",{className:`bg-ternary absolute rounded-md px-4 py-1.5 text-xs text-white ${e!=null&&e.discount?"left-2":"right-2"} ${e!=null&&e.discount&&(e!=null&&e.tag)?"top-4":"top-2"}`,children:r("product.out_of_stock")}),s.jsxs(S,{className:"flex w-full pb-5",children:[s.jsx(o,{href:route("products.show",{slug:e.slug}),children:s.jsx("img",{className:"h-60 w-full rounded-lg object-contain p-2 sm:h-56",src:((t=e==null?void 0:e.cover)==null?void 0:t.original_url)??"/storage/site/images/placeholder.webp",alt:e.name})}),s.jsxs("div",{className:"space-y-2",children:[(e==null?void 0:e.category)&&s.jsx(O,{className:"text-sm",children:s.jsx(o,{href:route("categories.show",{category:e.category.slug}),className:"hover:underline",children:e.category.name},e.category.id)}),s.jsx($,{children:s.jsx(h,{as:"h4",className:"font-normal",children:s.jsx(o,{href:route("products.show",{slug:e.slug}),children:e.name})})})]})]}),s.jsxs(A,{className:"mt-auto flex items-center justify-between",children:[s.jsx(N,{price:(e==null?void 0:e.price)??0,discountPrice:((n=e==null?void 0:e.discount)==null?void 0:n.price)??null}),(e==null?void 0:e.stock_status)===1&&s.jsx(G.div,{whileHover:{scale:1.03,transition:{duration:.2}},whileTap:{scale:.9},className:"inline-flex items-center justify-end",children:e.variations&&e.variations.length>0?s.jsx(I,{product:e}):s.jsx(y,{variant:"secondary",product:e,productVariantId:null})})]})]},e.id)};export{Y as P};
