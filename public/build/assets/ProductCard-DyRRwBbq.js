import{r as d,j as s,a as m}from"./app-Q253YIMy.js";import{C as j,b as g,d as f,c as v,a as N,e as u}from"./card-EGuHELbs.js";import{S as C,T as w,a as b,A as x}from"./toggle-group-Bdb5UR6C.js";import{B as y}from"./button-Ci-DNgYG.js";import{D as _,a as T,b as V,c as P,d as S,e as B}from"./dialog-Bzs-Vw8H.js";import{T as t}from"./typography-DL5iDV3i.js";import{B as D}from"./badge-CR4fxmf5.js";function k({product:e}){var h;const[l,r]=d.useState(null);d.useEffect(()=>{var a,i;if(e!=null&&e.grouped_variations){const n=Object.keys(e.grouped_variations)[0];n&&((a=e.grouped_variations[n])!=null&&a[1])&&r((i=e.grouped_variations[n][1])==null?void 0:i.id.toString())}},[e]);const o=(h=e==null?void 0:e.variations)==null?void 0:h.find(a=>{var i;return(i=a==null?void 0:a.variations)==null?void 0:i.some(n=>{var c;return((c=n==null?void 0:n.pivot)==null?void 0:c.variation_value_id)==l})});return s.jsxs(_,{children:[s.jsx(T,{asChild:!0,children:s.jsx(y,{variant:"outline",children:s.jsx(C,{})})}),s.jsxs(V,{children:[s.jsx(P,{className:"sr-only",children:"Product Variations"}),s.jsx(S,{className:"sr-only",children:"Product Variations"})]}),s.jsx(B,{className:"max-h-[80vh] overflow-y-auto sm:max-w-[600px]",children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 py-4 sm:grid-cols-[40%_auto]",children:[s.jsx("section",{children:s.jsx("img",{className:"h-60 w-full rounded-lg object-cover sm:aspect-auto sm:size-80 sm:h-80 sm:w-auto",src:e.cover.original_url,alt:""})}),s.jsxs("section",{children:[s.jsxs(t,{as:"h3",children:[" ",e.name]}),s.jsxs(t,{as:"h4",children:[" $",(o==null?void 0:o.price)??(e==null?void 0:e.price)]}),s.jsx(t,{as:"p",className:"mt-1",children:e.description}),s.jsx("div",{className:"mt-7",children:s.jsx(w,{type:"single",className:"justify-start",value:l??void 0,onValueChange:a=>r(a),children:Object.keys((e==null?void 0:e.grouped_variations)??{}).map(a=>s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs(t,{as:"h4",children:[" ",a," "]}),s.jsx("div",{className:"flex gap-2",children:e==null?void 0:e.grouped_variations[a].map(i=>s.jsx(b,{variant:"default",value:i.id.toString(),"aria-label":"Toggle bold",children:i.value},i.id))})]},a))})}),s.jsx("div",{className:"mt-5",children:s.jsx(x,{disabled:!l,variant:"default",className:"inline-flex w-full items-center justify-center",productVariantId:l,product:e,showPrice:!0})})]})]})})]})}const $=({product:e})=>{var l;return s.jsxs(j,{children:[s.jsxs(g,{children:[s.jsx(m,{href:route("products.show",{slug:e.slug}),children:s.jsx("img",{className:"h-40 w-full object-cover sm:h-60",src:e.cover.original_url,alt:e.name})}),s.jsx(f,{children:(l=e.categories)==null?void 0:l.map(r=>s.jsx(D,{variant:"outline",children:s.jsx(m,{href:route("categories.show",r.slug),children:r.name})},r.id))}),s.jsx(v,{children:s.jsx(m,{href:route("products.show",{slug:e.slug}),children:s.jsx("h4",{className:"scroll-m-20 text-xl font-semibold tracking-tight",children:e.name})})})]}),s.jsx(N,{children:s.jsx("p",{className:"h-32 overflow-hidden sm:h-40",children:e.description})}),s.jsxs(u,{className:"mt-auto flex items-center justify-between",children:[s.jsxs("span",{className:"font-semibold",children:["$",e.price]}),s.jsx("div",{className:"inline-flex items-center justify-end",children:e.variations&&e.variations.length>0?s.jsx(k,{product:e}):s.jsx(x,{product:e,productVariantId:null})})]})]},e.id)};export{$ as P};
